<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta itemprop=name content="Design Patterns - Builder"><meta itemprop=description content="The builder pattern allows us to write readable and understandable code to build complex objects."><meta itemprop=datePublished content="2021-04-19T23:48:35+02:00"><meta itemprop=dateModified content="2021-04-19T23:48:35+02:00"><meta itemprop=wordCount content="1175"><meta itemprop=keywords content="programming,java,"><meta property="og:title" content="Design Patterns - Builder"><meta property="og:description" content="The builder pattern allows us to write readable and understandable code to build complex objects."><meta property="og:type" content="article"><meta property="og:url" content="https://baris.io/posts/builder/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-19T23:48:35+02:00"><meta property="article:modified_time" content="2021-04-19T23:48:35+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Design Patterns - Builder"><meta name=twitter:description content="The builder pattern allows us to write readable and understandable code to build complex objects."><meta name=description content="The builder pattern allows us to write readable and understandable code to build complex objects."><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>Design Patterns - Builder</title><link rel=stylesheet href=https://baris.io/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://baris.io/>baris.io</a></div><nav class="site-nav hide-in-mobile"><a href=https://baris.io/posts/>Posts</a>
<a href=https://baris.io/tags/>Tags</a>
<a href=https://baris.io/about/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/bariskalkar target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://linkedin.com/in/mbaris target=_blank rel="noopener me" title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a href=https://github.com/mbaris target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://baris.io/posts/>Posts</a></li><li><a href=https://baris.io/tags/>Tags</a></li><li><a href=https://baris.io/about/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Apr 19, 2021</span></div><h1>Design Patterns - Builder</h1></header><div class=content><p>The builder pattern allows us to write readable and understandable code to build complex objects.
It is generally used to handle the construction of objects that contain a lot of parameters.
They are usually implemented as static inner classes. StringBuilder is a good example that is used a lot.</p><p>But first, let&rsquo;s talk about the alternatives first.</p><h2 id=telescoping-constructors>Telescoping constructors<a href=#telescoping-constructors class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>In this pattern, we have multiple constructors to support multiple combinations of parameters to create an instance.</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Movie</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>id</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>title</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>director</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>producer</span><span class=o>;</span>

  <span class=n>Movie</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=n>Movie</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>,</span> <span class=n>String</span> <span class=n>title</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=n>Movie</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>,</span> <span class=n>String</span> <span class=n>title</span><span class=o>,</span> <span class=n>String</span> <span class=n>producer</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>producer</span> <span class=o>=</span> <span class=n>producer</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=n>Movie</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>,</span> <span class=n>String</span> <span class=n>title</span><span class=o>,</span> <span class=n>String</span> <span class=n>producer</span><span class=o>,</span> <span class=n>String</span> <span class=n>director</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>producer</span> <span class=o>=</span> <span class=n>producer</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>director</span> <span class=o>=</span> <span class=n>director</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getTitle</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>title</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDirector</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>director</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getProducer</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>producer</span><span class=o>;</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>This is pretty straightforward but not very useful as the number of fields increases.
We create immutable objects with this approach but there are some problems with this approach.</p><ul><li>We need to write a lot of constructors to support all parameter combinations.</li><li>What if we wanted to create a movie with a director but without a producer? This becomes more of a problem if parameters have the same type.</li></ul><h2 id=exposed-setters>Exposed setters<a href=#exposed-setters class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Another way to deal with this problem is by exposing setters for every field we have.</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Movie</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>id</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>title</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>director</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>producer</span><span class=o>;</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getTitle</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>title</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDirector</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>director</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getProducer</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>producer</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setId</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setTitle</span><span class=o>(</span><span class=n>String</span> <span class=n>title</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setDirector</span><span class=o>(</span><span class=n>String</span> <span class=n>director</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>director</span> <span class=o>=</span> <span class=n>director</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setProducer</span><span class=o>(</span><span class=n>String</span> <span class=n>producer</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>producer</span> <span class=o>=</span> <span class=n>producer</span><span class=o>;</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>This is probably the most used and simplest pattern since we can easily auto-generate setter and getter methods.
There are some problems with this approach as well</p><ul><li>Exposing setters break immutability, so it is not a good idea for <a href=http://www.yegor256.com/2014/06/09/objects-should-be-immutable.html>various reasons</a></li><li>This class doesn&rsquo;t signify which of these setters must be used to create a valid object. So we can create an instance in an invalid state.</li></ul><h2 id=builder>Builder<a href=#builder class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>A simple implementation for the builder pattern for the movie class would look like this</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Movie</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>id</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>title</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>director</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>producer</span><span class=o>;</span>

  <span class=kd>private</span> <span class=nf>Movie</span><span class=o>(</span><span class=n>Builder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>id</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>title</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>director</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>director</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>producer</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>producer</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getTitle</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>title</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getDirector</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>director</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getProducer</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>producer</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Builder</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>String</span> <span class=n>id</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>title</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>director</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>producer</span><span class=o>;</span>

    <span class=kd>public</span> <span class=nf>Builder</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
      <span class=n>Validate</span><span class=o>.</span><span class=na>notBlank</span><span class=o>(</span><span class=n>id</span><span class=o>);</span>
      <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setTitle</span><span class=o>(</span><span class=n>String</span> <span class=n>title</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>title</span> <span class=o>=</span> <span class=n>title</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setDirector</span><span class=o>(</span><span class=n>String</span> <span class=n>director</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>director</span> <span class=o>=</span> <span class=n>director</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setProducer</span><span class=o>(</span><span class=n>String</span> <span class=n>producer</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>producer</span> <span class=o>=</span> <span class=n>producer</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Movie</span> <span class=nf>build</span><span class=o>()</span> <span class=o>{</span>
      <span class=k>return</span> <span class=k>new</span> <span class=n>Movie</span><span class=o>(</span><span class=k>this</span><span class=o>);</span>
    <span class=o>}</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><ul><li>If we want to make sure some fields are set, we can get them in the builder, constructor, or we can throw exceptions in the build method or somewhere else by validating them.</li><li>They are very easy to implement</li><li>They have very few drawbacks</li><li>A class with 4 parameters is not hard to build but when you have 9 parameters and 4 of them must not be null, this becomes much more helpful.</li><li>Even though they are generally used as inner static classes we can add a builder to legacy code pretty easily as a separate class</li></ul><p>Using generics makes really efficient constructors even for multiple layers of child-parent hierarchies. Let&rsquo;s have a look at a builder for User and Project which extends CompanyEntity and BaseEntity classes.</p><h3 id=baseentity>BaseEntity<a href=#baseentity class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>BaseEntity</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>id</span><span class=o>;</span>
  <span class=kd>private</span> <span class=kt>long</span> <span class=n>createdAt</span><span class=o>;</span>
  <span class=kd>private</span> <span class=kt>long</span> <span class=n>updatedAt</span><span class=o>;</span>

  <span class=n>BaseEntity</span><span class=o>(</span><span class=n>Builder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
    <span class=n>Validate</span><span class=o>.</span><span class=na>notBlank</span><span class=o>(</span><span class=n>id</span><span class=o>);</span>
    <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>id</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>createdAt</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>createdAt</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>updatedAt</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>updatedAt</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getId</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>id</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kt>long</span> <span class=nf>getCreatedAt</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>createdAt</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kt>long</span> <span class=nf>getUpdatedAt</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>updatedAt</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>protected</span> <span class=kd>static</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Builder</span><span class=o>&lt;</span><span class=n>T</span> <span class=kd>extends</span> <span class=n>BaseEntity</span><span class=o>,</span> <span class=n>B</span> <span class=kd>extends</span> <span class=n>Builder</span><span class=o>&gt;</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>String</span> <span class=n>id</span><span class=o>;</span>
    <span class=kd>private</span> <span class=kt>long</span> <span class=n>createdAt</span><span class=o>;</span>
    <span class=kd>private</span> <span class=kt>long</span> <span class=n>updatedAt</span><span class=o>;</span>

    <span class=kd>public</span> <span class=n>B</span> <span class=nf>setId</span><span class=o>(</span><span class=n>String</span> <span class=n>id</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>id</span> <span class=o>=</span> <span class=n>id</span><span class=o>;</span>
      <span class=k>return</span> <span class=o>(</span><span class=n>B</span><span class=o>)</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>B</span> <span class=nf>setCreatedAt</span><span class=o>(</span><span class=kt>long</span> <span class=n>createdAt</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>createdAt</span> <span class=o>=</span> <span class=n>createdAt</span><span class=o>;</span>
      <span class=k>return</span> <span class=o>(</span><span class=n>B</span><span class=o>)</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>B</span> <span class=nf>setUpdatedAt</span><span class=o>(</span><span class=kt>long</span> <span class=n>updatedAt</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>updatedAt</span> <span class=o>=</span> <span class=n>updatedAt</span><span class=o>;</span>
      <span class=k>return</span> <span class=o>(</span><span class=n>B</span><span class=o>)</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=kd>abstract</span> <span class=n>T</span> <span class=nf>build</span><span class=o>();</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><h3 id=companyentity>CompanyEntity<a href=#companyentity class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>CompanyEntity</span> <span class=kd>extends</span> <span class=n>BaseEntity</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>companyId</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>companyName</span><span class=o>;</span>

  <span class=n>CompanyEntity</span><span class=o>(</span><span class=n>Builder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
    <span class=kd>super</span><span class=o>(</span><span class=n>builder</span><span class=o>);</span>
    <span class=n>Validate</span><span class=o>.</span><span class=na>notBlank</span><span class=o>(</span><span class=n>companyId</span><span class=o>);</span>
    <span class=k>this</span><span class=o>.</span><span class=na>companyId</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>companyId</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>companyName</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>companyName</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getCompanyId</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>companyId</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getCompanyName</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>companyName</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>protected</span> <span class=kd>static</span> <span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Builder</span><span class=o>&lt;</span><span class=n>T</span> <span class=kd>extends</span> <span class=n>CompanyEntity</span><span class=o>,</span> <span class=n>B</span> <span class=kd>extends</span> <span class=n>CompanyEntity</span><span class=o>.</span><span class=na>Builder</span><span class=o>&gt;</span> <span class=kd>extends</span>
      <span class=n>BaseEntity</span><span class=o>.</span><span class=na>Builder</span><span class=o>&lt;</span><span class=n>T</span><span class=o>,</span> <span class=n>B</span><span class=o>&gt;</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>String</span> <span class=n>companyId</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>companyName</span><span class=o>;</span>

    <span class=kd>public</span> <span class=n>B</span> <span class=nf>setCompanyId</span><span class=o>(</span><span class=n>String</span> <span class=n>companyId</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>companyId</span> <span class=o>=</span> <span class=n>companyId</span><span class=o>;</span>
      <span class=k>return</span> <span class=o>(</span><span class=n>B</span><span class=o>)</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>B</span> <span class=nf>setCompanyName</span><span class=o>(</span><span class=n>String</span> <span class=n>companyName</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>companyName</span> <span class=o>=</span> <span class=n>companyName</span><span class=o>;</span>
      <span class=k>return</span> <span class=o>(</span><span class=n>B</span><span class=o>)</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><h3 id=user>User<a href=#user class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>class</span> <span class=nc>User</span> <span class=kd>extends</span> <span class=n>CompanyEntity</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>username</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>firstName</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>lastName</span><span class=o>;</span>

  <span class=n>User</span><span class=o>(</span><span class=n>Builder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
    <span class=kd>super</span><span class=o>(</span><span class=n>builder</span><span class=o>);</span>
    <span class=n>Validate</span><span class=o>.</span><span class=na>notBlank</span><span class=o>(</span><span class=n>username</span><span class=o>);</span>
    <span class=k>this</span><span class=o>.</span><span class=na>username</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>username</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>firstName</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>firstName</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>lastName</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>lastName</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getUsername</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>username</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getFirstName</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>firstName</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getLastName</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>lastName</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Builder</span> <span class=kd>extends</span> <span class=n>CompanyEntity</span><span class=o>.</span><span class=na>Builder</span><span class=o>&lt;</span><span class=n>User</span><span class=o>,</span> <span class=n>User</span><span class=o>.</span><span class=na>Builder</span><span class=o>&gt;</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>String</span> <span class=n>username</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>firstName</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>lastName</span><span class=o>;</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setUsername</span><span class=o>(</span><span class=n>String</span> <span class=n>username</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>username</span> <span class=o>=</span> <span class=n>username</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setFirstName</span><span class=o>(</span><span class=n>String</span> <span class=n>firstName</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>firstName</span> <span class=o>=</span> <span class=n>firstName</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setLastName</span><span class=o>(</span><span class=n>String</span> <span class=n>lastName</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>lastName</span> <span class=o>=</span> <span class=n>lastName</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>User</span> <span class=nf>build</span><span class=o>()</span> <span class=o>{</span>
      <span class=k>return</span> <span class=k>new</span> <span class=n>User</span><span class=o>(</span><span class=k>this</span><span class=o>);</span>
    <span class=o>}</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><h3 id=project>Project<a href=#project class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h3><div class=highlight><pre class=chroma><code class=language-java data-lang=java><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Project</span> <span class=kd>extends</span> <span class=n>CompanyEntity</span> <span class=o>{</span>

  <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
  <span class=kd>private</span> <span class=n>String</span> <span class=n>projectDepartment</span><span class=o>;</span>

  <span class=n>Project</span><span class=o>(</span><span class=n>Builder</span> <span class=n>builder</span><span class=o>)</span> <span class=o>{</span>
    <span class=kd>super</span><span class=o>(</span><span class=n>builder</span><span class=o>);</span>
    <span class=n>Validate</span><span class=o>.</span><span class=na>notBlank</span><span class=o>(</span><span class=n>name</span><span class=o>);</span>
    <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>name</span><span class=o>;</span>
    <span class=k>this</span><span class=o>.</span><span class=na>projectDepartment</span> <span class=o>=</span> <span class=n>builder</span><span class=o>.</span><span class=na>projectDepartment</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=n>String</span> <span class=nf>getProjectDepartment</span><span class=o>()</span> <span class=o>{</span>
    <span class=k>return</span> <span class=n>projectDepartment</span><span class=o>;</span>
  <span class=o>}</span>

  <span class=kd>public</span> <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Builder</span> <span class=kd>extends</span> <span class=n>CompanyEntity</span><span class=o>.</span><span class=na>Builder</span><span class=o>&lt;</span><span class=n>Project</span><span class=o>,</span> <span class=n>Project</span><span class=o>.</span><span class=na>Builder</span><span class=o>&gt;</span> <span class=o>{</span>

    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
    <span class=kd>private</span> <span class=n>String</span> <span class=n>projectDepartment</span><span class=o>;</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>setProjectDepartment</span><span class=o>(</span><span class=n>String</span> <span class=n>projectDepartment</span><span class=o>)</span> <span class=o>{</span>
      <span class=k>this</span><span class=o>.</span><span class=na>projectDepartment</span> <span class=o>=</span> <span class=n>projectDepartment</span><span class=o>;</span>
      <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
    <span class=o>}</span>

    <span class=nd>@Override</span>
    <span class=kd>public</span> <span class=n>Project</span> <span class=nf>build</span><span class=o>()</span> <span class=o>{</span>
      <span class=k>return</span> <span class=k>new</span> <span class=n>Project</span><span class=o>(</span><span class=k>this</span><span class=o>);</span>
    <span class=o>}</span>
  <span class=o>}</span>
<span class=o>}</span>
</code></pre></div><p>We can use our builders just like below</p><div class=highlight><pre class=chroma><code class=language-java data-lang=java>    <span class=n>User</span> <span class=n>user</span> <span class=o>=</span> <span class=k>new</span> <span class=n>User</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
        <span class=o>.</span><span class=na>setCompanyId</span><span class=o>(</span><span class=s>&#34;OpsGenie&#34;</span><span class=o>)</span>
        <span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>UUID</span><span class=o>.</span><span class=na>randomUUID</span><span class=o>().</span><span class=na>toString</span><span class=o>())</span>
        <span class=o>.</span><span class=na>setFirstName</span><span class=o>(</span><span class=s>&#34;asd&#34;</span><span class=o>)</span>
        <span class=o>.</span><span class=na>build</span><span class=o>();</span>

    <span class=n>Project</span> <span class=n>project</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Project</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
        <span class=o>.</span><span class=na>setCompanyId</span><span class=o>(</span><span class=s>&#34;OpsGenie&#34;</span><span class=o>)</span>
        <span class=o>.</span><span class=na>setId</span><span class=o>(</span><span class=n>UUID</span><span class=o>.</span><span class=na>randomUUID</span><span class=o>().</span><span class=na>toString</span><span class=o>())</span>
        <span class=o>.</span><span class=na>setName</span><span class=o>(</span><span class=s>&#34;thundra&#34;</span><span class=o>)</span>
        <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</code></pre></div><p>The reason for using two different generics on our Builder classes are;</p><ul><li>The first one is used in the build method, and it returns the type of the child class.</li><li>The second one is used as the return value of our setter methods in the builder.
Without it, our setId method would return a BaseEntity.Builder and we couldn&rsquo;t set the child class fields after that.</li></ul></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://baris.io/tags/programming>programming</a></span><span class=tag><a href=https://baris.io/tags/java>java</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>1175 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2021-04-19 21:48 +0000</p></footer></article><div class="post-nav thin"><a class=next-post href=https://baris.io/posts/singleton/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>Design Patterns - Singleton</span></a></div><div id=comments class=thin></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2021 <a href=https://baris.io/>Mehmet Barış Kalkar</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://baris.io/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://baris.io/js/bundle.min.7d8545daa55d62427355498dd8da13f98ff79a7938ce7d2a5e2ae1ec0de3beb8.js integrity="sha256-fYVF2qVdYkJzVUmN2NoT+Y/3mnk4zn0qXirh7A3jvrg=" crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-56410734-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>